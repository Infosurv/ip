<div ng-controller="QuestionController">
	<div class="adminBlock">
		<h1 id="project-title">{{ survey_name }} 
			<a href="#" id="addQuestion" ng-click="toggleQuestionForm($event)">
				<span class="glyphicon glyphicon-plus-sign"></span>
			</a>
		</h1>
		
		<ul id="questions" class="list-group" ng-if="questions.length > 0">
			<li ng-repeat="question in questions" class="clearfix list-group-item">
			  <input class="question" type="text" data-questionid="{{ question.id }}" ng-model="questions[$index].description" ng-change="update($event, $index)"></input>
			  <ul class="tools clearfix">
			  	<li><a href="/#/ip/{{stateParams.survey_id}}/{{question._id}}" class="copy"><i class="fa fa-code"></i></a></li>
			  	<li><a href="#" ui-sref="questions.edit({id: question._id})" class="edit"><i class="fa fa-pencil"></i></a></li>
			  	<li><a href="#" class="delete" ng-click="deleteQuestion($event, question._id)"><i class="fa fa-remove"></i></a></li>
			  </ul>
			</li>
		</ul>

		<div id="noQuestionsMessage" class="alert alert-info" ng-if="questions.length === 0">
			<p>No questions exist yet. Let's add some.</p>
		</div>

		<div id="questionForm">
			<h4>Add a question</h4>
			<div class="input-group">
				<span class="input-group-addon" id="basic-addon1"><i class="fa fa-question-circle"></i></span>
				<input type="text" class="form-control" name="description" placeholder="Description" ng-model="newQuestion.description">
			</div>

			<div class="input-group">
				<span class="input-group-addon" id="basic-addon1"><i class="fa fa-clock-o"></i></span>
				<input type="text" class="form-control" placeholder="Minumum Evaluation Time" name="delay" ng-model="newQuestion.delay">
			</div>

			<div class="input-group">
				<span class="input-group-addon" id="basic-addon1"><i class="fa fa-clock-o"></i></span>
				<input type="text" class="form-control" placeholder="Secondary Delay" name="secondaryDelay" ng-model="newQuestion.secondaryDelay">
			</div>

			<button type="submit" class="btn btn-primary pull-right" ng-click="addQuestion($event)">Submit</button>
		</div>
	</div>

	<div class="question_edit adminBlock clearfix" ng-if="stateParams.id.length > 0">
      <h4>Edit Question</h4>
      <div class="input-group" id="questionDelay">
        <span class="input-group-addon" id="basic-addon1"></span>
        <input type="text" class="form-control" placeholder="Delay" name="delay" ng-model="question.delay">
      </div>

      <div class="input-group" id="questionSecondaryDelay">
        <span class="input-group-addon" id="basic-addon2"></span>
        <input type="text" class="form-control" placeholder="Secondary Delay" name="secondaryDelay" ng-model="question.secondaryDelay">
      </div>

      <button type="button" class="btn btn-primary pull-right" ng-click="update($event)">Update</button>
    </div>
	
    <div ui-view><!-- Question Management --></div>
	
	<p class="sandbox alert alert-info"></p>
	<script type="text/template" class="tpl">
		<iframe src="" width='500' height='500'></iframe>
	</script>
</div>